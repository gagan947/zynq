<section class="">
      <div class="container-fluid ">
            <div class="row">
                  <div class="mx-auto" [ngClass]="{ 'col-md-10': !isEdit, 'col-md-12': isEdit }">
                        <div class="text-center mb-5 ct_hide_on_edit">
                              <h4 class="ct_fs_20 ct_fw_600 mb-2">Complete Your Professional Profile</h4>
                              <p class="mb-0">Please fill in your professional details to complete your profile</p>
                        </div>
                        <!-- progressbar -->
                        <ul id="ct_form_progressbar">
                              <li *ngFor="let step of steps; let i = index" [id]="step.id" class="cursor-pointer"
                                    [class.active]="i <= currentStep" (click)="isEdit ? currentStep = i : null">
                                    {{ step.label }}
                              </li>
                        </ul>

                        <fieldset *ngIf="currentStep == 0">
                              <form [formGroup]="besicInfoForm" (ngSubmit)="onSubmitBasicInfo()">
                                    <div class="ct_white_bg ct_p_40 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Basic Information</h5>
                                          <div class="row">
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Name<span
                                                                  class="ct_red_text">*</span></label>
                                                      <input type="text" class="form-control ct_input"
                                                            placeholder="Enter your name" formControlName="name">
                                                      <span
                                                            *ngIf="besicInfoForm.controls['name'].invalid && besicInfoForm.controls['name'].touched">
                                                            <span *ngIf="besicInfoForm.controls['name'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  Name is required.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Clinic Name<span
                                                                  class="ct_red_text">*</span></label>
                                                      <input type="text" class="form-control ct_input"
                                                            placeholder="Enter clinic name"
                                                            formControlName="clinic_name">
                                                      <span
                                                            *ngIf="besicInfoForm.controls['clinic_name'].invalid && besicInfoForm.controls['clinic_name'].touched">
                                                            <span *ngIf="besicInfoForm.controls['clinic_name'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  Clinic name is required.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Age<span
                                                                  class="ct_red_text">*</span></label>
                                                      <input type="text" class="form-control ct_input"
                                                            formControlName="age" placeholder="Enter age" step="1">
                                                      <div *ngIf="besicInfoForm.get('age')?.touched && besicInfoForm.get('age')?.invalid"
                                                            class="ct_text_red mt-2">
                                                            <div *ngIf="besicInfoForm.get('age')?.errors?.['required']">
                                                                  Age is required.
                                                            </div>
                                                            <div *ngIf="besicInfoForm.get('age')?.errors?.['min']">
                                                                  Minimum age must be 1.
                                                            </div>
                                                            <div *ngIf="besicInfoForm.get('age')?.errors?.['pattern']">
                                                                  Age is not valid.
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Gender<span
                                                                  class="ct_red_text">*</span></label>
                                                      <nz-select formControlName="gender" nzPlaceHolder="Select gender"
                                                            class="form-control ct_input">
                                                            <nz-option nzValue="Male" nzLabel="Male"></nz-option>
                                                            <nz-option nzValue="Female" nzLabel="Female"></nz-option>
                                                            <nz-option nzValue="Other" nzLabel="Other"></nz-option>
                                                      </nz-select>
                                                      <div *ngIf="besicInfoForm.get('gender')?.touched && besicInfoForm.get('gender')?.invalid"
                                                            class="ct_text_red mt-2">
                                                            Gender is required.
                                                      </div>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">IVO Registration
                                                            Number
                                                      </label>
                                                      <input type="text" class="form-control ct_input"
                                                            placeholder="Enter IVO Registration Number"
                                                            formControlName="ivo_registration_number">
                                                      <span
                                                            *ngIf="besicInfoForm.controls['ivo_registration_number'].invalid && besicInfoForm.controls['ivo_registration_number'].touched">
                                                            <span *ngIf="besicInfoForm.controls['ivo_registration_number'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  IVO registration number is required.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">HSA Id </label>
                                                      <input type="text" class="form-control ct_input"
                                                            placeholder="Enter HSA Id" formControlName="hsa_id">
                                                      <span
                                                            *ngIf="besicInfoForm.controls['hsa_id'].invalid && besicInfoForm.controls['hsa_id'].touched">
                                                            <span *ngIf="besicInfoForm.controls['hsa_id'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  HSA id is required.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-12">
                                                      <label for="" class="mb-2 ct_text_black">Clinic Description<span
                                                                  class="ct_red_text">*</span></label>
                                                      <textarea type="text" class="form-control ct_input h-auto"
                                                            rows="4" placeholder="Enter description"
                                                            formControlName="clinic_description"></textarea>
                                                      <span
                                                            *ngIf="besicInfoForm.controls['clinic_description'].invalid && besicInfoForm.controls['clinic_description'].touched">
                                                            <span *ngIf="besicInfoForm.controls['clinic_description'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  Description is required.
                                                            </span>
                                                            <span *ngIf="besicInfoForm.controls['clinic_description'].errors?.['maxlength']"
                                                                  class="ct_text_red mt-2">
                                                                  Description is too long.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-0 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Profile
                                                            Image</label>
                                                      <div class="">
                                                            <div *ngIf="!profilePreview" class="ct_upload_product_main"
                                                                  (click)="profileInput.click()">
                                                                  <svg width="33" height="33" viewBox="0 0 33 33"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M5.87174 22.0167C4.26376 20.9403 3.20508 19.1073 3.20508 17.027C3.20508 13.9023 5.59376 11.3354 8.64473 11.0528C9.26883 7.25653 12.5654 4.36035 16.5384 4.36035C20.5114 4.36035 23.808 7.25653 24.4321 11.0528C27.4831 11.3354 29.8717 13.9023 29.8717 17.027C29.8717 19.1073 28.8131 20.9403 27.2051 22.0167M11.2051 21.6937L16.5384 16.3604M16.5384 16.3604L21.8717 21.6937M16.5384 16.3604V28.3604"
                                                                              stroke="#9CA3AF" stroke-width="2.66667"
                                                                              stroke-linecap="round"
                                                                              stroke-linejoin="round" />
                                                                  </svg>

                                                                  <p class="text-center ct_fs_18 ct_text_op_07 mb-0">
                                                                        Upload
                                                                        your image here</p>
                                                                  <small
                                                                        class="text-center d-block ct_text_9CA3AF py-2">PNG,
                                                                        JPG up to
                                                                        5MB</small>
                                                                  <label>
                                                                        <div class="ct_browse_btn">
                                                                              <span>Browse Files</span>
                                                                        </div>
                                                                  </label>
                                                            </div>
                                                            <input type="file" #profileInput class="d-none"
                                                                  accept="image/*" formControlName="profile_image"
                                                                  (change)="onProfileImageChange($event)">
                                                            <div class="ct_uploaded_img123 position-relative w-100 ct_upload_product_main"
                                                                  *ngIf="profilePreview">
                                                                  <div class="ct_uploaded_img_w">
                                                                        <img [src]="profilePreview" alt=""
                                                                              style="object-fit: contain;" />
                                                                        <i class="fa-solid fa-xmark"
                                                                              (click)="removeProfileImage()"></i>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="form-group mb-0 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Clinic Logo</label>
                                                      <div class="">
                                                            <div *ngIf="!logoPreview" class="ct_upload_product_main"
                                                                  (click)="logoInput.click()">
                                                                  <svg width="33" height="33" viewBox="0 0 33 33"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M5.87174 22.0167C4.26376 20.9403 3.20508 19.1073 3.20508 17.027C3.20508 13.9023 5.59376 11.3354 8.64473 11.0528C9.26883 7.25653 12.5654 4.36035 16.5384 4.36035C20.5114 4.36035 23.808 7.25653 24.4321 11.0528C27.4831 11.3354 29.8717 13.9023 29.8717 17.027C29.8717 19.1073 28.8131 20.9403 27.2051 22.0167M11.2051 21.6937L16.5384 16.3604M16.5384 16.3604L21.8717 21.6937M16.5384 16.3604V28.3604"
                                                                              stroke="#9CA3AF" stroke-width="2.66667"
                                                                              stroke-linecap="round"
                                                                              stroke-linejoin="round" />
                                                                  </svg>

                                                                  <p class="text-center ct_fs_18 ct_text_op_07 mb-0">
                                                                        Upload
                                                                        your image here</p>
                                                                  <small
                                                                        class="text-center d-block ct_text_9CA3AF py-2">PNG,
                                                                        JPG up to
                                                                        5MB</small>
                                                                  <label>
                                                                        <div class="ct_browse_btn">
                                                                              <span>Browse Files</span>
                                                                        </div>
                                                                  </label>
                                                            </div>
                                                            <input type="file" #logoInput class="d-none"
                                                                  accept="image/*" formControlName="logo"
                                                                  (change)="onLogoImage($event)">
                                                            <div class="ct_uploaded_img123 position-relative w-100 ct_upload_product_main"
                                                                  *ngIf="logoPreview">
                                                                  <div class="ct_uploaded_img_w">
                                                                        <img [src]="logoPreview" alt=""
                                                                              style="object-fit: contain;" />
                                                                        <i class="fa-solid fa-xmark"
                                                                              (click)="removeImage()"></i>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                          </div>
                                    </div>
                                    <!-- <input type="button" name="next" class="ct_form_next ct_black_btn float-end mx-1"
                                    value="Next" /> -->

                                    <button type="submit" class="ct_form_next action-button ct_black_btn float-end"
                                          value="Next">
                                          {{isEdit ? 'Update' : 'Next'}}
                                    </button>
                                    @if(isEdit){
                                    <button type="button" name="Next"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Next" (click)="nextStep()">Next</button>
                                    }
                              </form>
                        </fieldset>
                        <fieldset *ngIf="currentStep == 1">
                              <form [formGroup]="contactForm" (ngSubmit)="submitContactForm()" class="ct_form">
                                    <div class="ct_white_bg ct_p_40 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Location & Contact Details</h5>

                                          <div class="row">
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Street Address<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter street address"
                                                                  formControlName="street_address">
                                                            <span
                                                                  *ngIf="contactForm.controls['street_address'].invalid && contactForm.controls['street_address'].touched">
                                                                  <span *ngIf="contactForm.controls['street_address'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        Street address is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">City<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter city name" formControlName="city">
                                                            <span
                                                                  *ngIf="contactForm.controls['city'].invalid && contactForm.controls['city'].touched">
                                                                  <span *ngIf="contactForm.controls['city'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        City is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">State<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter state name"
                                                                  formControlName="state">
                                                            <span
                                                                  *ngIf="contactForm.controls['state'].invalid && contactForm.controls['state'].touched">
                                                                  <span *ngIf="contactForm.controls['state'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        State is required.
                                                                  </span>
                                                            </span>
                                                      </div>

                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Zip Code<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter ZIP code"
                                                                  formControlName="zip_code">
                                                            <span
                                                                  *ngIf="contactForm.controls['zip_code'].invalid && contactForm.controls['zip_code'].touched">
                                                                  <span *ngIf="contactForm.controls['zip_code'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        Zip code is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="col-md-12">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Map Location<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter map location"
                                                                  (input)="searchLocation($event)"
                                                                  [value]="selectedLocation">
                                                            <div class="ct_map_location_dropdown"
                                                                  *ngIf="locations!.length > 0">
                                                                  <ul>
                                                                        @for (item of locations; track $index) {
                                                                        <li (click)="selectLocation(item.description)">
                                                                              {{item.description}}
                                                                        </li>
                                                                        }
                                                                  </ul>
                                                            </div>
                                                            <span>
                                                                  <span *ngIf="!selectedLocation && submitted"
                                                                        class="ct_text_red mt-2">
                                                                        Map location is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Phone No<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="number" class="form-control ct_input"
                                                                  placeholder="Enter phone number"
                                                                  formControlName="mobile_number">
                                                            <span
                                                                  *ngIf="contactForm.controls['mobile_number'].invalid && contactForm.controls['mobile_number'].touched">
                                                                  <span *ngIf="contactForm.controls['mobile_number'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        Phone number is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>

                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Website certificateURl</label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter website URL"
                                                                  formControlName="website_url">
                                                            <span
                                                                  *ngIf="contactForm.controls['website_url'].invalid && contactForm.controls['website_url'].touched">
                                                                  <span *ngIf="contactForm.controls['website_url'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        Website URL is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                          </div>
                                    </div>
                                    <div class="float-end">
                                          <button type="submit" name="next"
                                                class="ct_form_next action-button  ct_black_btn float-end mx-1"
                                                value="Next">{{isEdit ? 'Update' : 'Next'}}</button>
                                          @if(isEdit){
                                          <button type="button" name="Next"
                                                class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                                value="Next" (click)="nextStep()">Next</button>
                                          }
                                          <button type="button" name="previous"
                                                class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                                value="Previous" (click)="previousStep()">Previous</button>

                                    </div>
                              </form>
                        </fieldset>
                        <fieldset *ngIf="currentStep == 2">
                              <form>
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Certification Type</h5>
                                          <ng-container>
                                                <ng-container>
                                                      <div class="ct_big_card_scroll_500 ct_custom_scroll ct_pe_40">
                                                            <div class="row mt-4"
                                                                  *ngFor="let cert of certificaTeypes; let i = index">
                                                                  <div class="col-md-6 mb-4">
                                                                        <label class="mb-2 ct_text_black">Certificate
                                                                              Type </label>
                                                                        <input type="text" class="form-control ct_input"
                                                                              placeholder="Enter institute"
                                                                              [(ngModel)]="cert.certification_name"
                                                                              [ngModelOptions]="{standalone: true}">
                                                                  </div>

                                                                  <div class="col-md-6">
                                                                        <div class="form-group mb-4 mb-md-0">
                                                                              <label class="mb-2 ct_text_black">Certificate
                                                                              </label>
                                                                              <div
                                                                                    class="d-flex align-items-center gap-2 ">
                                                                                    <div class="ct_flex_1">
                                                                                          <div
                                                                                                *ngIf="cert.upload_path; else uploadInput">
                                                                                                <a [href]="certificateURl+ cert.upload_path"
                                                                                                      target="_blank">
                                                                                                      <i
                                                                                                            class="fa fa-file"></i>
                                                                                                      View Uploaded
                                                                                                      Certificate
                                                                                                </a>
                                                                                                <button type="button"
                                                                                                      class="btn btn-sm btn-link ct_text_red p-0 ms-2"
                                                                                                      (click)="removePreview(i,cert.doctor_certification_id)">
                                                                                                      Change
                                                                                                </button>
                                                                                          </div>
                                                                                          <ng-template #uploadInput>
                                                                                                <input type="file"
                                                                                                      class="form-control ct_input"
                                                                                                      accept="image/*, application/pdf"
                                                                                                      style="padding: 13px 20px;"
                                                                                                      (change)="onFileChange($event, i)">
                                                                                          </ng-template>
                                                                                    </div>
                                                                                    @if(cert.upload_path){
                                                                                    <button type="button"
                                                                                          class="ct_red_btn"
                                                                                          (click)="removePreview(i, cert.doctor_certification_id)">
                                                                                          <i class="fa fa-trash"></i>
                                                                                    </button>
                                                                                    }
                                                                              </div>
                                                                        </div>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </ng-container>
                                          </ng-container>
                                    </div>
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Education</h5>

                                          <div class="row ct_border_btm_1 mb-3"
                                                *ngFor="let edu of education; let j = index">
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Institute<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter institute"
                                                                  [(ngModel)]="edu.institution"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3 ">
                                                            <label for="" class="mb-2 ct_text_black">Degree<span
                                                                        class="ct_red_text">*</span></label>
                                                            <div class="d-flex align-items-center gap-2">
                                                                  <div class="ct_flex_1">
                                                                        <input type="text" class="form-control ct_input"
                                                                              placeholder="Enter degree"
                                                                              [(ngModel)]="edu.degree_name"
                                                                              [ngModelOptions]="{standalone: true}">
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Start year<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input id="bday-month" type="month"
                                                                  class="form-control ct_input"
                                                                  [(ngModel)]="edu.start_year"
                                                                  [ngModelOptions]="{standalone: true}" />
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">End year<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="month" class="form-control ct_input"
                                                                  [(ngModel)]="edu.end_year"
                                                                  [ngModelOptions]="{standalone: true}" />
                                                      </div>
                                                </div>
                                                <div class=" ms-auto mb-3">
                                                      <button type="button" class="ms-auto ct_red_btn"
                                                            (click)="removeEducation(j)" *ngIf="j > 0">
                                                            <i class="fa fa-trash"></i>
                                                      </button>
                                                </div>
                                          </div>
                                          <a href="javascript:void(0)" class="ct_blue_text" (click)="addEducation()">+
                                                Add Education</a>
                                    </div>
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Experience</h5>

                                          <div class="row ct_border_btm_1 mb-3"
                                                *ngFor="let exp of experience; let k = index">
                                                <div class="col-md-12">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Organization<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter organization"
                                                                  [(ngModel)]="exp.organisation_name"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class="col-md-12">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Designation<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter designation"
                                                                  [(ngModel)]="exp.designation"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Start Date<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="date" class="form-control ct_input"
                                                                  [(ngModel)]="exp.start_date"
                                                                  [max]="maxDate | date:'yyyy-MM-dd'"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">End Date<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="date" class="form-control ct_input"
                                                                  [(ngModel)]="exp.end_date"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class=" ms-auto mb-3">
                                                      <button type="button" class="ms-auto d-block ct_red_btn"
                                                            (click)="removeExperience(k)" *ngIf="k > 0">
                                                            <i class="fa fa-trash"></i>
                                                      </button>
                                                </div>
                                          </div>
                                          <a href="javascript:void(0)" class="ct_blue_text" (click)="addExperience()">+
                                                Add Experience</a>
                                    </div>

                                    <button type="submit" name="next"
                                          class="ct_form_next action-button  ct_black_btn float-end mx-1" value="Next"
                                          (click)="onSubmitProfessional()">{{isEdit ? 'Update' : 'Next'}}</button>
                                    @if(isEdit){
                                    <button type="button" name="Next"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Next" (click)="nextStep()">Next</button>
                                    }
                                    <button type="button" name="previous"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Previous" (click)="previousStep()">Previous</button>
                              </form>
                        </fieldset>
                        <fieldset *ngIf="currentStep == 3">
                              <form [formGroup]="ExpertiseForm" (ngSubmit)="onExpertiseSubmit()">
                                    <div class=" ct_white_bg ct_p_40 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">
                                                Services & Expertise</h5>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Treatments
                                                      Provided<span class="ct_red_text">*</span></label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Treatments"
                                                      class="form-control ct_input" formControlName="treatments"
                                                      nzNotFoundContent="No Treatments Found">
                                                      @for (item of treatments; track item) {
                                                      <nz-option [nzLabel]="item.name"
                                                            [nzValue]="item.treatment_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('treatments')?.invalid && ExpertiseForm.get('treatments')?.touched">
                                                      Please add at least one treatment.
                                                </span>
                                          </div>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Skin
                                                      Type
                                                      Expertise<span class="ct_red_text">*</span>
                                                </label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Skin Types"
                                                      class="form-control ct_input" formControlName="skin_types"
                                                      nzNotFoundContent="No Skin Types Found">
                                                      @for (item of skintypes; track item) {
                                                      <nz-option [nzLabel]="item.name"
                                                            [nzValue]="item.skin_type_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('skin_types')?.invalid && ExpertiseForm.get('skin_types')?.touched">
                                                      Please add at least one skin type.
                                                </span>
                                          </div>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Skin Condition<span
                                                            class="ct_red_text">*</span></label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Skin Conditions"
                                                      class="form-control ct_input" formControlName="skin_condition"
                                                      nzNotFoundContent="No Severity Found">
                                                      @for (item of skinConditions; track item) {
                                                      <nz-option [nzLabel]="item.name"
                                                            [nzValue]="item.skin_condition_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('skin_condition')?.invalid && ExpertiseForm.get('skin_condition')?.touched">
                                                      Please add at least one skin condition.
                                                </span>
                                          </div>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Surgeries Provided<span
                                                            class="ct_red_text">*</span></label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Surgeries"
                                                      class="form-control ct_input" formControlName="surgeries"
                                                      nzNotFoundContent="No Severity Found">
                                                      @for (item of surgeries; track item) {
                                                      <nz-option [nzLabel]="item.type"
                                                            [nzValue]="item.surgery_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('surgeries')?.invalid && ExpertiseForm.get('surgeries')?.touched">
                                                      Please add at least one surgery.
                                                </span>
                                          </div>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Devices<span
                                                            class="ct_red_text">*</span></label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Devices"
                                                      class="form-control ct_input" formControlName="devices"
                                                      nzNotFoundContent="No Device Found">
                                                      @for (item of devices; track item) {
                                                      <nz-option [nzLabel]="item.device"
                                                            [nzValue]="item.aesthetic_device_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('devices')?.invalid && ExpertiseForm.get('devices')?.touched">
                                                      Please add at least one device.
                                                </span>
                                          </div>
                                    </div>
                                    <button type="submit" name="next"
                                          class="ct_form_next action-button  ct_black_btn float-end mx-1"
                                          value="Next">{{isEdit ? 'Update' : 'Next'}}</button>
                                    @if(isEdit){
                                    <button type="button" name="Next"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Next" (click)="nextStep()">Next</button>
                                    }
                                    <button type="button" name="previous"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Previous" (click)="previousStep()">Previous</button>
                                    <!-- <input
                                type="button" name="previous" class="previous action-button-previous"
                                value="Previous" /> -->
                              </form>
                        </fieldset>
                        <fieldset *ngIf="currentStep == 4">
                              <form [formGroup]="operationHoursForm" (ngSubmit)="onTimeSubmit()">
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Consultation Fees</h5>

                                          <div class="row">
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Fee per
                                                                  Session<span class="ct_red_text">*</span></label>
                                                            <div class="position-relative">
                                                                  <input type="number" class="form-control ct_input"
                                                                        placeholder="Enter fee per session"
                                                                        formControlName="fee_per_session">
                                                                  <span class="ct_show_eye">$</span>
                                                            </div>
                                                            <div class="ct_text_red mt-1"
                                                                  *ngIf="operationHoursForm.get('fee_per_session')?.hasError('required') && operationHoursForm.get('fee_per_session')?.touched">
                                                                  Fee per session is required.
                                                            </div>
                                                            <div class="ct_text_red mt-1"
                                                                  *ngIf="operationHoursForm.get('fee_per_session')?.hasError('min') && operationHoursForm.get('fee_per_session')?.touched">
                                                                  Fee per session can not be negative.
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div [formGroup]="session_duration" class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Session
                                                                  Duration<span class="ct_red_text">*</span></label>
                                                            <div class="row align-items-center">
                                                                  <div class=" col-md-6">
                                                                        <div class="d-flex align-items-center gap-2">
                                                                              <input type="text"
                                                                                    class="form-control ct_input"
                                                                                    formControlName="hours"
                                                                                    placeholder="In hours">
                                                                              <span class="ct_white_nowrap">hrs</span>
                                                                        </div>
                                                                        <div class="ct_text_red mt-1"
                                                                              *ngIf="operationHoursForm.get('session_duration.hours')?.hasError('required') && operationHoursForm.get('session_duration.hours')?.touched">
                                                                              Hours are required.
                                                                        </div>
                                                                        <div class="ct_text_red mt-1"
                                                                              *ngIf="operationHoursForm.get('session_duration.hours')?.hasError('min') && operationHoursForm.get('session_duration.hours')?.touched">
                                                                              Hours can not be negative.
                                                                        </div>
                                                                        <div class="ct_text_red mt-1"
                                                                              *ngIf="operationHoursForm.get('session_duration.hours')?.hasError('pattern') && operationHoursForm.get('session_duration.hours')?.touched">
                                                                              Invalid hours
                                                                        </div>
                                                                  </div>

                                                                  <div class="col-md-6">
                                                                        <div class="d-flex align-items-center gap-2">
                                                                              <input type="text"
                                                                                    class="form-control ct_input"
                                                                                    formControlName="minutes"
                                                                                    placeholder="In minutes">
                                                                              <span class="ct_white_nowrap">min</span>
                                                                        </div>
                                                                        <div class="ct_text_red mt-1"
                                                                              *ngIf="operationHoursForm.get('session_duration.minutes')?.hasError('required') && operationHoursForm.get('session_duration.minutes')?.touched">
                                                                              Minutes are required.
                                                                        </div>
                                                                        <div class="ct_text_red mt-1"
                                                                              *ngIf="operationHoursForm.get('session_duration.minutes')?.hasError('min') && operationHoursForm.get('session_duration.minutes')?.touched">
                                                                              Minutes can not be negative.
                                                                        </div>
                                                                        <div class="ct_text_red mt-1"
                                                                              *ngIf="operationHoursForm.get('session_duration.minutes')?.hasError('max') && operationHoursForm.get('session_duration.minutes')?.touched">
                                                                              Minutes can not be greater than 59.
                                                                        </div>
                                                                        <div class="ct_text_red mt-1"
                                                                              *ngIf="operationHoursForm.get('session_duration.minutes')?.hasError('pattern') && operationHoursForm.get('session_duration.minutes')?.touched">
                                                                              Invalid minutes
                                                                        </div>
                                                                        <div class="ct_text_red mt-1"
                                                                              *ngIf="operationHoursForm.get('session_duration.hours')?.value && operationHoursForm.get('session_duration.minutes')?.value === 00">
                                                                              Session duration can not be 00:00
                                                                        </div>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                          </div>
                                    </div>
                                    <div class="ct_white_bg ct_p_40 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4"
                                          formArrayName="operation_hours">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Operation Hours</h5>
                                          <div class="row align-items-center ct_border_btm_1 py-3"
                                                *ngFor="let group of operationHours.controls; let i = index"
                                                [formGroupName]="i">
                                                <div class="col-xl-3 col-lg-3">
                                                      <div
                                                            class="mb-2 mb-lg-0 d-flex align-items-center justify-content-between gap-2">
                                                            <p class="mb-0 ct_text_clr_444">{{
                                                                  group.get('day_of_week')?.value }}</p>
                                                            <div class="d-block d-lg-none">
                                                                  <div class="form-check mb-0">
                                                                        <input type="checkbox"
                                                                              class="form-check-input ct_custom_check"
                                                                              style="width: 16px; height: 16px; margin-top: 0px;"
                                                                              formControlName="closed" id="closed{{i}}">
                                                                        <label class="form-check-label ms-2"
                                                                              for="closed{{i}}">Closed</label>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="col-xl-6 col-lg-8 ">
                                                      <div class="d-flex align-items-center gap-3">
                                                            <div class="form-group ct_flex_1">
                                                                  <input type="time" class="form-control ct_input"
                                                                        formControlName="start_time"
                                                                        [disabled]="group.get('closed')?.value"
                                                                        [ngClass]="{'is-invalid': group.errors?.['start_time'] && group.get('start_time')?.touched}">
                                                                  <div *ngIf="group.errors?.['start_time'] && group.get('start_time')?.touched"
                                                                        class="ct_text_red">
                                                                        {{ group.errors?.['start_time'] }}
                                                                  </div>
                                                            </div>
                                                            <div class="form-group ct_flex_1">
                                                                  <input type="time" class="form-control ct_input"
                                                                        formControlName="end_time"
                                                                        [disabled]="group.get('closed')?.value"
                                                                        [ngClass]="{'is-invalid': group.errors?.['end_time'] && group.get('end_time')?.touched}">
                                                                  <div *ngIf="group.errors?.['end_time'] && group.get('end_time')?.touched"
                                                                        class="ct_text_red">
                                                                        {{ group.errors?.['end_time'] }}
                                                                  </div>
                                                                  <div *ngIf="group.errors?.['timeRangeInvalid']"
                                                                        class="ct_text_red">
                                                                        End time must be after start time.
                                                                  </div>
                                                            </div>
                                                            <div class="d-none d-lg-block">
                                                                  <div class="form-check mb-0">
                                                                        <input type="checkbox"
                                                                              class="form-check-input ct_custom_check"
                                                                              formControlName="closed" id="closed{{i}}">
                                                                        <label class="form-check-label ms-2"
                                                                              for="closed{{i}}">Closed</label>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                          </div>
                                    </div>
                                    <button type="submit" name="next"
                                          class="ct_form_next action-button  ct_black_btn float-end mx-1"
                                          value="Next">{{isEdit ? 'Update' : 'Submit'}}</button>
                                    <input type="button" name="previous"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Previous" (click)="previousStep()">
                              </form>
                        </fieldset>
                  </div>
            </div>
      </div>
</section>