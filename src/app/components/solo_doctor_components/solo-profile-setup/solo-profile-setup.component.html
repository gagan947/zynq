<section class="">
      <div class="container-fluid ">
            <div class="row">
                  <div class="mx-auto" [ngClass]="{ 'col-md-10 mt-5': !isEdit, 'col-md-12': isEdit }">
                        <div class="text-center mb-5 ct_hide_on_edit">
                              <h4 class="ct_fs_20 ct_fw_600 mb-2">Complete Your Professional Profile</h4>
                              <p class="mb-0">Please fill in your professional details to complete your profile</p>
                        </div>
                        <!-- progressbar -->

                        <ul id="ct_form_progressbar">
                              <li *ngFor="let step of steps; let i = index" [id]="step.id" class="cursor-pointer"
                                    [class.active]="i <= currentStep" (click)="isEdit ? changeStep(i) : null">
                                    {{ step.label }}
                              </li>
                        </ul>

                        <fieldset *ngIf="currentStep == 0">
                              <form [formGroup]="besicInfoForm" (ngSubmit)="onSubmitBasicInfo()">
                                    <div class="ct_white_bg ct_p_40 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Basic Information</h5>
                                          <div class="row">
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Name<span
                                                                  class="ct_red_text">*</span></label>
                                                      <input type="text" class="form-control ct_input"
                                                            placeholder="Enter your name" formControlName="name">
                                                      <span
                                                            *ngIf="besicInfoForm.controls['name'].invalid && besicInfoForm.controls['name'].touched">
                                                            <span *ngIf="besicInfoForm.controls['name'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  Name is required.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Clinic Name<span
                                                                  class="ct_red_text">*</span></label>
                                                      <input type="text" class="form-control ct_input"
                                                            placeholder="Enter clinic name"
                                                            formControlName="clinic_name">
                                                      <span
                                                            *ngIf="besicInfoForm.controls['clinic_name'].invalid && besicInfoForm.controls['clinic_name'].touched">
                                                            <span *ngIf="besicInfoForm.controls['clinic_name'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  Clinic name is required.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Age<span
                                                                  class="ct_red_text">*</span></label>
                                                      <input type="text" class="form-control ct_input"
                                                            formControlName="age" placeholder="Enter age" step="1">
                                                      <div *ngIf="besicInfoForm.get('age')?.touched && besicInfoForm.get('age')?.invalid"
                                                            class="ct_text_red mt-2">
                                                            <div *ngIf="besicInfoForm.get('age')?.errors?.['required']">
                                                                  Age is required.
                                                            </div>
                                                            <div *ngIf="besicInfoForm.get('age')?.errors?.['min']">
                                                                  Minimum age must be 1.
                                                            </div>
                                                            <div *ngIf="besicInfoForm.get('age')?.errors?.['pattern']">
                                                                  Age is not valid.
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">Gender<span
                                                                  class="ct_red_text">*</span></label>
                                                      <nz-select formControlName="gender" nzPlaceHolder="Select gender"
                                                            class="form-control ct_input">
                                                            <nz-option nzValue="Male" nzLabel="Male"></nz-option>
                                                            <nz-option nzValue="Female" nzLabel="Female"></nz-option>
                                                            <nz-option nzValue="Other" nzLabel="Other"></nz-option>
                                                      </nz-select>
                                                      <div *ngIf="besicInfoForm.get('gender')?.touched && besicInfoForm.get('gender')?.invalid"
                                                            class="ct_text_red mt-2">
                                                            Gender is required.
                                                      </div>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">IVO Registration
                                                            Number
                                                      </label>
                                                      <input type="text" class="form-control ct_input"
                                                            placeholder="Enter IVO Registration Number"
                                                            formControlName="ivo_registration_number">
                                                      <span
                                                            *ngIf="besicInfoForm.controls['ivo_registration_number'].invalid && besicInfoForm.controls['ivo_registration_number'].touched">
                                                            <span *ngIf="besicInfoForm.controls['ivo_registration_number'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  IVO registration number is required.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-2 ct_text_black">HSA Id </label>
                                                      <input type="text" class="form-control ct_input"
                                                            placeholder="Enter HSA Id" formControlName="hsa_id">
                                                      <span
                                                            *ngIf="besicInfoForm.controls['hsa_id'].invalid && besicInfoForm.controls['hsa_id'].touched">
                                                            <span *ngIf="besicInfoForm.controls['hsa_id'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  HSA id is required.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-12">
                                                      <label for="" class="mb-2 ct_text_black">Clinic Description<span
                                                                  class="ct_red_text">*</span></label>
                                                      <textarea type="text" class="form-control ct_input h-auto"
                                                            rows="4" placeholder="Enter description"
                                                            formControlName="clinic_description"></textarea>
                                                      <span
                                                            *ngIf="besicInfoForm.controls['clinic_description'].invalid && besicInfoForm.controls['clinic_description'].touched">
                                                            <span *ngIf="besicInfoForm.controls['clinic_description'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  Description is required.
                                                            </span>
                                                            <span *ngIf="besicInfoForm.controls['clinic_description'].errors?.['maxlength']"
                                                                  class="ct_text_red mt-2">
                                                                  Description is too long.
                                                            </span>
                                                      </span>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-0 ct_text_black">Profile
                                                            Image</label>
                                                      <div class="">
                                                            <div *ngIf="!profilePreview" class="ct_upload_product_main"
                                                                  (click)="profileInput.click()">
                                                                  <svg width="33" height="33" viewBox="0 0 33 33"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M5.87174 22.0167C4.26376 20.9403 3.20508 19.1073 3.20508 17.027C3.20508 13.9023 5.59376 11.3354 8.64473 11.0528C9.26883 7.25653 12.5654 4.36035 16.5384 4.36035C20.5114 4.36035 23.808 7.25653 24.4321 11.0528C27.4831 11.3354 29.8717 13.9023 29.8717 17.027C29.8717 19.1073 28.8131 20.9403 27.2051 22.0167M11.2051 21.6937L16.5384 16.3604M16.5384 16.3604L21.8717 21.6937M16.5384 16.3604V28.3604"
                                                                              stroke="#9CA3AF" stroke-width="2.66667"
                                                                              stroke-linecap="round"
                                                                              stroke-linejoin="round" />
                                                                  </svg>

                                                                  <p class="text-center ct_fs_18 ct_text_op_07 mb-0">
                                                                        Upload
                                                                        your image here</p>
                                                                  <small
                                                                        class="text-center d-block ct_text_9CA3AF py-2">PNG,
                                                                        JPG up to
                                                                        5MB</small>
                                                                  <label>
                                                                        <div class="ct_browse_btn">
                                                                              <span>Browse Files</span>
                                                                        </div>
                                                                  </label>
                                                            </div>
                                                            <input type="file" #profileInput class="d-none"
                                                                  accept="image/*" formControlName="profile_image"
                                                                  (change)="onProfileImageChange($event)">
                                                            <div class="ct_uploaded_img123 position-relative w-100 ct_upload_product_main"
                                                                  *ngIf="profilePreview">
                                                                  <div class="ct_uploaded_img_w">
                                                                        <img [src]="profilePreview" alt=""
                                                                              style="object-fit: contain;" />
                                                                        <i class="fa-solid fa-xmark"
                                                                              (click)="removeProfileImage()"></i>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="form-group mb-4 col-md-6">
                                                      <label for="" class="mb-0 ct_text_black">Clinic Logo</label>
                                                      <div class="">
                                                            <div *ngIf="!logoPreview" class="ct_upload_product_main"
                                                                  (click)="logoInput.click()">
                                                                  <svg width="33" height="33" viewBox="0 0 33 33"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M5.87174 22.0167C4.26376 20.9403 3.20508 19.1073 3.20508 17.027C3.20508 13.9023 5.59376 11.3354 8.64473 11.0528C9.26883 7.25653 12.5654 4.36035 16.5384 4.36035C20.5114 4.36035 23.808 7.25653 24.4321 11.0528C27.4831 11.3354 29.8717 13.9023 29.8717 17.027C29.8717 19.1073 28.8131 20.9403 27.2051 22.0167M11.2051 21.6937L16.5384 16.3604M16.5384 16.3604L21.8717 21.6937M16.5384 16.3604V28.3604"
                                                                              stroke="#9CA3AF" stroke-width="2.66667"
                                                                              stroke-linecap="round"
                                                                              stroke-linejoin="round" />
                                                                  </svg>

                                                                  <p class="text-center ct_fs_18 ct_text_op_07 mb-0">
                                                                        Upload
                                                                        your image here</p>
                                                                  <small
                                                                        class="text-center d-block ct_text_9CA3AF py-2">PNG,
                                                                        JPG up to
                                                                        5MB</small>
                                                                  <label>
                                                                        <div class="ct_browse_btn">
                                                                              <span>Browse Files</span>
                                                                        </div>
                                                                  </label>
                                                            </div>
                                                            <input type="file" #logoInput class="d-none"
                                                                  accept="image/*" formControlName="logo"
                                                                  (change)="onLogoImage($event)">
                                                            <div class="ct_uploaded_img123 position-relative w-100 ct_upload_product_main"
                                                                  *ngIf="logoPreview">
                                                                  <div class="ct_uploaded_img_w">
                                                                        <img [src]="logoPreview" alt=""
                                                                              style="object-fit: contain;" />
                                                                        <i class="fa-solid fa-xmark"
                                                                              (click)="removeImage()"></i>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="form-group mb-0">
                                                      <label for="" class="mb-2">Upload Clinic Images</label>
                                                      <div class="ct_upload_product_main ct_upload_product_main_180">
                                                            <svg width="33" height="33" viewBox="0 0 33 33" fill="none"
                                                                  xmlns="http://www.w3.org/2000/svg">
                                                                  <path d="M5.87174 22.0167C4.26376 20.9403 3.20508 19.1073 3.20508 17.027C3.20508 13.9023 5.59376 11.3354 8.64473 11.0528C9.26883 7.25653 12.5654 4.36035 16.5384 4.36035C20.5114 4.36035 23.808 7.25653 24.4321 11.0528C27.4831 11.3354 29.8717 13.9023 29.8717 17.027C29.8717 19.1073 28.8131 20.9403 27.2051 22.0167M11.2051 21.6937L16.5384 16.3604M16.5384 16.3604L21.8717 21.6937M16.5384 16.3604V28.3604"
                                                                        stroke="#9CA3AF" stroke-width="2.66667"
                                                                        stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                            </svg>

                                                            <p class="text-center ct_fs_18 ct_text_op_07 mb-0">Upload
                                                                  clinic
                                                                  images
                                                                  here</p>
                                                            <label for="ct_upload_product">
                                                                  <input type="file" name="" id="ct_upload_product"
                                                                        class="d-none" accept="image/*"
                                                                        (change)="onProductImage($event)" multiple>
                                                                  <div class="ct_browse_btn">
                                                                        <span>Browse Files</span>
                                                                  </div>
                                                            </label>
                                                            <!-- after upload image change url to below image -->
                                                            <img src="assets/img/hunting_knee.png" alt=""
                                                                  class="ct_uploaded_img d-none">
                                                      </div>
                                                      <div class="ct_multiple_img_div ct_custom_scroll">
                                                            @for (item of previewProductImages; track $index) {
                                                            <div class="ct_uploaded_img123 position-relative ">
                                                                  <div class="ct_uploaded_img_w">
                                                                        <img [src]="item" alt="" />
                                                                        <i class="fa-solid fa-xmark ct_cursor_pointer"
                                                                              (click)="removeProductImage($index, item)"></i>
                                                                  </div>
                                                            </div>
                                                            }
                                                      </div>
                                                      <!-- <span *ngIf="previewProductImages.length == 0 && submitted">
                                                      <span class="ct_text_red mt-2">
                                                            Please upload product image.
                                                      </span>
                                                </span> -->
                                                </div>
                                          </div>
                                    </div>
                                    <!-- <input type="button" name="next" class="ct_form_next ct_black_btn float-end mx-1"
                                    value="Next" /> -->

                                    <button type="submit" class="ct_form_next action-button ct_black_btn float-end"
                                          value="Next" [disabled]="loading">
                                          @if(loading){
                                          <div class="spinner-border" role="status">
                                                <span class="sr-only">Loading...</span>
                                          </div>
                                          }@else {
                                          {{isEdit ? 'Update' : 'Next'}}
                                          }
                                    </button>
                                    @if(isEdit){
                                    <button type="button" name="Next"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Next" (click)="nextStep()">Next</button>
                                    }
                              </form>
                        </fieldset>
                        <fieldset *ngIf="currentStep == 1">
                              <form [formGroup]="contactForm" (ngSubmit)="submitContactForm()" class="ct_form">
                                    <div class="ct_white_bg ct_p_40 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Location & Contact Details</h5>

                                          <div class="row">
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Street Address<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter street address"
                                                                  formControlName="street_address">
                                                            <span
                                                                  *ngIf="contactForm.controls['street_address'].invalid && contactForm.controls['street_address'].touched">
                                                                  <span *ngIf="contactForm.controls['street_address'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        Street address is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">City<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter city name" formControlName="city">
                                                            <span
                                                                  *ngIf="contactForm.controls['city'].invalid && contactForm.controls['city'].touched">
                                                                  <span *ngIf="contactForm.controls['city'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        City is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">State<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter state name"
                                                                  formControlName="state">
                                                            <span
                                                                  *ngIf="contactForm.controls['state'].invalid && contactForm.controls['state'].touched">
                                                                  <span *ngIf="contactForm.controls['state'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        State is required.
                                                                  </span>
                                                            </span>
                                                      </div>

                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Zip Code<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter ZIP code"
                                                                  formControlName="zip_code">
                                                            <span
                                                                  *ngIf="contactForm.controls['zip_code'].invalid && contactForm.controls['zip_code'].touched">
                                                                  <span *ngIf="contactForm.controls['zip_code'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        Zip code is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="col-md-12">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Map Location<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter map location"
                                                                  (input)="searchLocation($event)"
                                                                  [value]="selectedLocation">
                                                            <div class="ct_map_location_dropdown"
                                                                  *ngIf="locations!.length > 0">
                                                                  <ul>
                                                                        @for (item of locations; track $index) {
                                                                        <li (click)="selectLocation(item.description)">
                                                                              {{item.description}}
                                                                        </li>
                                                                        }
                                                                  </ul>
                                                            </div>
                                                            <span>
                                                                  <span *ngIf="!selectedLocation && submitted"
                                                                        class="ct_text_red mt-2">
                                                                        Map location is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Phone No<span
                                                                        class="ct_red_text">*</span></label>
                                                            <!-- <input type="number" class="form-control ct_input"
                                                                  placeholder="Enter phone number"
                                                                  formControlName="mobile_number"> -->
                                                            <ngx-intl-tel-input
                                                                  [cssClass]="'form-control ct_input w-full'"
                                                                  [enableAutoCountrySelect]="false"
                                                                  [enablePlaceholder]="true" [searchCountryFlag]="true"
                                                                  [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                  [selectFirstCountry]="false"
                                                                  [selectedCountryISO]="selectedCountry"
                                                                  [maxLength]="15" [phoneValidation]="true"
                                                                  formControlName="mobile_number"></ngx-intl-tel-input>
                                                            <span
                                                                  *ngIf="contactForm.controls['mobile_number'].invalid && contactForm.controls['mobile_number'].touched">
                                                                  <span *ngIf="contactForm.controls['mobile_number'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        Phone number is required.
                                                                  </span>
                                                                  <span *ngIf="contactForm.controls['mobile_number'].errors?.['validatePhoneNumber']"
                                                                        class="ct_text_red mt-2">
                                                                        Please enter a valid phone number.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>

                                                <div class="col-md-6">
                                                      <div class="form-group mb-4">
                                                            <label for="" class="mb-2 ct_text_black">Website
                                                                  URL</label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter website URL"
                                                                  formControlName="website_url">
                                                            <span
                                                                  *ngIf="contactForm.controls['website_url'].invalid && contactForm.controls['website_url'].touched">
                                                                  <span *ngIf="contactForm.controls['website_url'].errors?.['required']"
                                                                        class="ct_text_red mt-2">
                                                                        Website URL is required.
                                                                  </span>
                                                            </span>
                                                      </div>
                                                </div>
                                          </div>
                                    </div>
                                    <div class="float-end">
                                          <button type="submit" name="next"
                                                class="ct_form_next action-button  ct_black_btn float-end mx-1"
                                                value="Next" [disabled]="loading">
                                                @if(loading){
                                                <div class="spinner-border" role="status">
                                                      <span class="sr-only">Loading...</span>
                                                </div>
                                                }@else {
                                                {{isEdit ? 'Update' : 'Next'}}
                                                }
                                          </button>
                                          @if(isEdit){
                                          <button type="button" name="Next"
                                                class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                                value="Next" (click)="nextStep()">Next</button>
                                          }
                                          <button type="button" name="previous"
                                                class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                                value="Previous" (click)="previousStep()">Previous</button>

                                    </div>
                              </form>
                        </fieldset>
                        <fieldset *ngIf="currentStep == 2">
                              <form>
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Certification Type</h5>
                                          <ng-container>
                                                <ng-container>
                                                      <div class="ct_big_card_scroll_500 ct_custom_scroll ct_pe_40">
                                                            <div class="row mt-4"
                                                                  *ngFor="let cert of certificaTeypes; let i = index">
                                                                  <div class="col-md-6 mb-4">
                                                                        <label class="mb-2 ct_text_black">Certificate
                                                                              Type </label>
                                                                        <input type="text" class="form-control ct_input"
                                                                              placeholder="Enter Certificate Type"
                                                                              [(ngModel)]="cert.certification_name"
                                                                              [ngModelOptions]="{standalone: true}"
                                                                              readonly>
                                                                  </div>

                                                                  <div class="col-md-6">
                                                                        <div class="form-group mb-4 mb-md-0">
                                                                              <label class="mb-2 ct_text_black">Certificate
                                                                              </label>
                                                                              <div
                                                                                    class="d-flex align-items-center gap-2 ">
                                                                                    <div class="ct_flex_1">
                                                                                          <div
                                                                                                *ngIf="cert.upload_path; else uploadInput">
                                                                                                <a [href]="certificateURl+ cert.upload_path"
                                                                                                      target="_blank">
                                                                                                      <i
                                                                                                            class="fa fa-file"></i>
                                                                                                      View Uploaded
                                                                                                      Certificate
                                                                                                </a>
                                                                                                <button type="button"
                                                                                                      class="btn btn-sm btn-link ct_text_red p-0 ms-2"
                                                                                                      (click)="removePreview(i,cert.doctor_certification_id)">
                                                                                                      Change
                                                                                                </button>
                                                                                          </div>
                                                                                          <ng-template #uploadInput>
                                                                                                <input type="file"
                                                                                                      class="form-control ct_input"
                                                                                                      accept="image/*, application/pdf"
                                                                                                      style="padding: 13px 20px;"
                                                                                                      (change)="onFileChange($event, i)">
                                                                                          </ng-template>
                                                                                    </div>
                                                                                    @if(cert.upload_path){
                                                                                    <button type="button"
                                                                                          class="ct_red_btn"
                                                                                          (click)="removePreview(i, cert.doctor_certification_id)">
                                                                                          <i class="fa fa-trash"></i>
                                                                                    </button>
                                                                                    }
                                                                              </div>
                                                                        </div>
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </ng-container>
                                          </ng-container>
                                    </div>
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Education</h5>

                                          <div class="row ct_border_btm_1 mb-3"
                                                *ngFor="let edu of education; let j = index">
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Institute<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter institute"
                                                                  [(ngModel)]="edu.institution"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3 ">
                                                            <label for="" class="mb-2 ct_text_black">Degree<span
                                                                        class="ct_red_text">*</span></label>
                                                            <div class="d-flex align-items-center gap-2">
                                                                  <div class="ct_flex_1">
                                                                        <input type="text" class="form-control ct_input"
                                                                              placeholder="Enter degree"
                                                                              [(ngModel)]="edu.degree_name"
                                                                              [ngModelOptions]="{standalone: true}">
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Start year<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input id="bday-month" type="month"
                                                                  class="form-control ct_input"
                                                                  [(ngModel)]="edu.start_year"
                                                                  [ngModelOptions]="{standalone: true}" />
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">End year<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="month" class="form-control ct_input"
                                                                  [(ngModel)]="edu.end_year"
                                                                  [ngModelOptions]="{standalone: true}" />
                                                      </div>
                                                </div>
                                                <div class=" ms-auto mb-3">
                                                      <button type="button" class="ms-auto ct_red_btn"
                                                            (click)="removeEducation(j)" *ngIf="j > 0">
                                                            <i class="fa fa-trash"></i>
                                                      </button>
                                                </div>
                                          </div>
                                          <a href="javascript:void(0)" class="ct_blue_text" (click)="addEducation()">+
                                                Add Education</a>
                                    </div>
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Experience</h5>

                                          <div class="row ct_border_btm_1 mb-3"
                                                *ngFor="let exp of experience; let k = index">
                                                <div class="col-md-12">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Organization<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter organization"
                                                                  [(ngModel)]="exp.organisation_name"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class="col-md-12">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Designation<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="text" class="form-control ct_input"
                                                                  placeholder="Enter designation"
                                                                  [(ngModel)]="exp.designation"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Start Date<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="date" class="form-control ct_input"
                                                                  [(ngModel)]="exp.start_date"
                                                                  [max]="maxDate | date:'yyyy-MM-dd'"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class="col-md-6">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">End Date<span
                                                                        class="ct_red_text">*</span></label>
                                                            <input type="date" class="form-control ct_input"
                                                                  [(ngModel)]="exp.end_date"
                                                                  [ngModelOptions]="{standalone: true}">
                                                      </div>
                                                </div>
                                                <div class=" ms-auto mb-3">
                                                      <button type="button" class="ms-auto d-block ct_red_btn"
                                                            (click)="removeExperience(k)" *ngIf="k > 0">
                                                            <i class="fa fa-trash"></i>
                                                      </button>
                                                </div>
                                          </div>
                                          <a href="javascript:void(0)" class="ct_blue_text" (click)="addExperience()">+
                                                Add Experience</a>
                                    </div>

                                    <button type="submit" name="next"
                                          class="ct_form_next action-button  ct_black_btn float-end mx-1" value="Next"
                                          (click)="onSubmitProfessional()" [disabled]="loading">
                                          @if(loading){
                                          <div class="spinner-border" role="status">
                                                <span class="sr-only">Loading...</span>
                                          </div>
                                          }@else {
                                          {{isEdit ? 'Update' : 'Next'}}
                                          }
                                    </button>
                                    @if(isEdit){
                                    <button type="button" name="Next"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Next" (click)="nextStep()">Next</button>
                                    }
                                    <button type="button" name="previous"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Previous" (click)="previousStep()">Previous</button>
                              </form>
                        </fieldset>
                        <fieldset *ngIf="currentStep == 3">
                              <form [formGroup]="ExpertiseForm" (ngSubmit)="onExpertiseSubmit()">
                                    <div class=" ct_white_bg ct_p_40 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">
                                                Services & Expertise</h5>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Treatments
                                                      Provided<span class="ct_red_text">*</span></label>
                                                <div class="table-responsive" style="height: 50vh;">
                                                      <table class="table ct_custom_table">
                                                            <thead>
                                                                  <tr class="bg-gray-200">
                                                                        <th class="border p-2">Sr. No</th>
                                                                        <th class="border p-2">
                                                                              <input class="form-check-input ct_custom_check"
                                                                                    formControlName="selected"
                                                                                    (change)="onAllCheckboxChange($event)"
                                                                                    type="checkbox" value=""
                                                                                    id="flexCheckDefault"
                                                                                    [indeterminate]="isIndeterminate()">
                                                                        </th>
                                                                        <th class="border p-2">Treatment</th>
                                                                        <th class="border p-2">Price</th>
                                                                        <th class="border p-2">Session Duration (min)
                                                                        </th>
                                                                        <th class="border p-2">Notes (Optional)</th>
                                                                  </tr>
                                                            </thead>
                                                            <tbody formArrayName="treatments">
                                                                  <tr *ngFor="let treatment of treatmentArray.controls; let i = index"
                                                                        [formGroupName]="i">
                                                                        <td class="border p-2">{{ i + 1 }}</td>
                                                                        <td class="border p-2 text-center">
                                                                              <!-- <input type="checkbox"
                                                                              formControlName="selected"
                                                                              (change)="onCheckboxChange(i)" /> -->
                                                                              <div class="text-start  ">
                                                                                    <input class="form-check-input ct_custom_check"
                                                                                          formControlName="selected"
                                                                                          (change)="onCheckboxChange(i)"
                                                                                          type="checkbox" value=""
                                                                                          id="flexCheckDefault">

                                                                              </div>
                                                                        </td>
                                                                        <td class="border p-2">{{ treatments[i].name }}
                                                                        </td>
                                                                        <td class="border p-2" style="width: 200px;">
                                                                              <input type="number"
                                                                                    formControlName="price"
                                                                                    style="width: 200px;"
                                                                                    placeholder="Enter price"
                                                                                    class="form-control"
                                                                                    *ngIf="treatment.get('selected')?.value" />
                                                                              <span class="ct_text_red mt-2"
                                                                                    *ngIf="treatment.get('price')?.errors?.['required'] && treatment.get('price')?.touched">
                                                                                    Price is required
                                                                              </span>
                                                                              <span class="ct_text_red mt-2"
                                                                                    *ngIf="treatment.get('price')?.errors?.['min']">
                                                                                    Minimum price must be 0.
                                                                              </span>
                                                                        </td>
                                                                        <td class="border p-2">
                                                                              <input *ngIf="treatment.get('selected')?.value"
                                                                                    type="text"
                                                                                    formControlName="session_duration"
                                                                                    style="width: 200px;"
                                                                                    placeholder="Enter duration"
                                                                                    class="form-control">
                                                                        </td>
                                                                        <td class="border p-2">
                                                                              <input *ngIf="treatment.get('selected')?.value"
                                                                                    type="text" formControlName="note"
                                                                                    style="width: 200px;"
                                                                                    placeholder="Enter note"
                                                                                    class="form-control">
                                                                        </td>
                                                                  </tr>
                                                            </tbody>
                                                      </table>

                                                </div>
                                          </div>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Skin
                                                      Type
                                                      Expertise<span class="ct_red_text">*</span>
                                                </label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Skin Types"
                                                      class="form-control ct_input h-auto" formControlName="skin_types"
                                                      nzNotFoundContent="No Skin Types Found">
                                                      @for (item of skintypes; track item) {
                                                      <nz-option [nzLabel]="item.name"
                                                            [nzValue]="item.skin_type_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('skin_types')?.invalid && ExpertiseForm.get('skin_types')?.touched">
                                                      Please add at least one skin type.
                                                </span>
                                          </div>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Skin Condition<span
                                                            class="ct_red_text">*</span></label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Skin Conditions"
                                                      class="form-control ct_input h-auto"
                                                      formControlName="skin_condition"
                                                      nzNotFoundContent="No Severity Found">
                                                      @for (item of skinConditions; track item) {
                                                      <nz-option [nzLabel]="item.name"
                                                            [nzValue]="item.skin_condition_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('skin_condition')?.invalid && ExpertiseForm.get('skin_condition')?.touched">
                                                      Please add at least one skin condition.
                                                </span>
                                          </div>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Surgeries Provided<span
                                                            class="ct_red_text">*</span></label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Surgeries"
                                                      class="form-control ct_input h-auto" formControlName="surgeries"
                                                      nzNotFoundContent="No Severity Found">
                                                      @for (item of surgeries; track item) {
                                                      <nz-option [nzLabel]="item.english"
                                                            [nzValue]="item.surgery_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('surgeries')?.invalid && ExpertiseForm.get('surgeries')?.touched">
                                                      Please add at least one surgery.
                                                </span>
                                          </div>
                                          <div class="mb-4">
                                                <label for="" class="mb-2 ct_text_black">Devices<span
                                                            class="ct_red_text">*</span></label>
                                                <nz-select nzMode="multiple" nzPlaceHolder="Select Devices"
                                                      class="form-control ct_input h-auto" formControlName="devices"
                                                      nzNotFoundContent="No Device Found">
                                                      @for (item of devices; track item) {
                                                      <nz-option [nzLabel]="item.device"
                                                            [nzValue]="item.aesthetic_device_id"></nz-option>
                                                      }
                                                </nz-select>
                                                <span class="ct_text_red mt-2"
                                                      *ngIf="ExpertiseForm.get('devices')?.invalid && ExpertiseForm.get('devices')?.touched">
                                                      Please add at least one device.
                                                </span>
                                          </div>
                                    </div>
                                    <button type="submit" name="next"
                                          class="ct_form_next action-button  ct_black_btn float-end mx-1" value="Next"
                                          [disabled]="loading">
                                          @if(loading){
                                          <div class="spinner-border" role="status">
                                                <span class="sr-only">Loading...</span>
                                          </div>
                                          }@else {
                                          {{isEdit ? 'Update' : 'Next'}}
                                          }
                                    </button>
                                    @if(isEdit){
                                    <button type="button" name="Next"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Next" (click)="nextStep()">Next</button>
                                    }
                                    <button type="button" name="previous"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Previous" (click)="previousStep()">Previous</button>
                                    <!-- <input
                                type="button" name="previous" class="previous action-button-previous"
                                value="Previous" /> -->
                              </form>
                        </fieldset>
                        <fieldset *ngIf="currentStep == 4">
                              <form [formGroup]="availabilityForm" (ngSubmit)="onTimeSubmit()">
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Consultation Fees</h5>
                                          <div class="row">
                                                <div class="col-md-12">
                                                      <div class="form-group mb-3">
                                                            <label for="" class="mb-2 ct_text_black">Fee per
                                                                  Session<span class="ct_red_text">*</span></label>
                                                            <div class="position-relative">
                                                                  <input type="number" class="form-control ct_input"
                                                                        placeholder="Enter fee per session"
                                                                        formControlName="fee_per_session">
                                                                  <span class="ct_show_eye">$</span>
                                                            </div>
                                                            <div class="ct_text_red mt-1"
                                                                  *ngIf="availabilityForm.get('fee_per_session')?.hasError('required') && availabilityForm.get('fee_per_session')?.touched">
                                                                  Fee per session is required.
                                                            </div>
                                                            <div class="ct_text_red mt-1"
                                                                  *ngIf="availabilityForm.get('fee_per_session')?.hasError('min') && availabilityForm.get('fee_per_session')?.touched">
                                                                  Fee per session can not be negative.
                                                            </div>
                                                      </div>
                                                </div>
                                          </div>
                                    </div>
                                    <div class="ct_white_bg ct_p_20 ct_border_clr_e6e6e6 ct_border_radius_15 mb-4">
                                          <h5 class="ct_fs_20 ct_ff_ambit_semibold mb-3">Operation Hours</h5>
                                          <div class="py-3 border-bottom d-flex align-items-center gap-3 gap-md-5">
                                                <label class=" d-flex align-items-center gap-2">
                                                      <input type="radio" class="form-check-input ct_custom_check me-1"
                                                            formControlName="sameForAllDays" [value]="true" />
                                                      <span>Same for all days</span>
                                                </label>
                                                <label class=" d-flex align-items-center gap-2">
                                                      <input type="radio" class="form-check-input ct_custom_check me-1"
                                                            formControlName="sameForAllDays" [value]="false" />
                                                      <span>Customize</span>
                                                </label>
                                          </div>
                                          <div formArrayName="days">
                                                <!-- If SAME FOR ALL DAYS is selected, show only one day (index 0) -->
                                                <div *ngIf="availabilityForm.get('sameForAllDays')?.value === true">
                                                      <div [formGroupName]="0" class="py-3 border-bottom">
                                                            <h6 class="mb-2">{{ daysOfWeek[0] }} (applies to all days)
                                                            </h6>
                                                            <ng-container>
                                                                  <div formArrayName="sessions">
                                                                        <div *ngFor="let session of getSessions(0).controls; let j = index"
                                                                              [formGroupName]="j">
                                                                              <div class="ct_grid_40_40_20 mb-3">
                                                                                    <div>
                                                                                          <div class="form-group">
                                                                                                <label for=""
                                                                                                      class="mb-2 ct_text_black">
                                                                                                      Start Time
                                                                                                      <span
                                                                                                            class="ct_red_text">*</span></label>
                                                                                                <input type="time"
                                                                                                      class="form-control ct_input"
                                                                                                      formControlName="start_time" />
                                                                                          </div>
                                                                                          <div *ngIf="session.get('start_time')?.touched && session.get('start_time')?.hasError('required')"
                                                                                                class="ct_text_red">
                                                                                                Start time is required
                                                                                          </div>
                                                                                    </div>
                                                                                    <div>
                                                                                          <div class="form-group">
                                                                                                <label for=""
                                                                                                      class="mb-2 ct_text_black">End
                                                                                                      Time<span
                                                                                                            class="ct_red_text">*</span></label>
                                                                                                <input type="time"
                                                                                                      class="form-control ct_input"
                                                                                                      formControlName="end_time" />
                                                                                          </div>
                                                                                          <div *ngIf="session.get('end_time')?.touched && session.get('end_time')?.hasError('required')"
                                                                                                class="ct_text_red">
                                                                                                End time is required
                                                                                          </div>
                                                                                    </div>
                                                                                    <div>
                                                                                          <div class="form-group">
                                                                                                <label for=""
                                                                                                      class="mb-2 ct_text_black">Session
                                                                                                      Duration
                                                                                                      <span
                                                                                                            class="ct_red_text">*</span></label>
                                                                                                <nz-select
                                                                                                      class="form-control ct_input"
                                                                                                      formControlName="sessionDuration"
                                                                                                      nzPlaceHolder="Select session duration">
                                                                                                      <nz-option
                                                                                                            *ngFor="let duration of sessionDuration"
                                                                                                            [nzValue]="duration"
                                                                                                            [nzLabel]="duration"></nz-option>
                                                                                                </nz-select>
                                                                                          </div>
                                                                                          <div *ngIf="session.get('sessionDuration')?.touched && session.get('sessionDuration')?.hasError('required')"
                                                                                                class="ct_text_red">
                                                                                                Session duration is
                                                                                                required
                                                                                          </div>
                                                                                    </div>

                                                                                    <div>
                                                                                          <label
                                                                                                class="ct_575_label_none">&nbsp;</label>
                                                                                          <button type="button"
                                                                                                class="ct_delete_icon_l"
                                                                                                (click)="removeSession(0, j)">
                                                                                                <i
                                                                                                      class="fa-solid fa-xmark"></i>
                                                                                          </button>
                                                                                    </div>
                                                                              </div>
                                                                        </div>
                                                                  </div>
                                                                  <button type="button" class="ct_black_btn py-2 px-3"
                                                                        (click)="addSession(0)">+ Add Session</button>
                                                            </ng-container>
                                                      </div>
                                                </div>

                                                <!-- If CUSTOMIZE is selected, show all 7 days -->
                                                <div *ngIf="availabilityForm.get('sameForAllDays')?.value === false">
                                                      <div *ngFor="let dayCtrl of days.controls; let i = index"
                                                            [formGroupName]="i" class="py-3 border-bottom">
                                                            <div class="mb-2">
                                                                  <label>
                                                                        <input type="checkbox" formControlName="active"
                                                                              class="form-check-input ct_custom_check me-2" />
                                                                        {{ daysOfWeek[i] }}
                                                                  </label>
                                                            </div>
                                                            <div *ngIf="dayCtrl.get('active')?.value">
                                                                  <div formArrayName="sessions">
                                                                        <div *ngFor="let session of getSessions(i).controls; let j = index"
                                                                              [formGroupName]="j" class="ml-4 mb-2">
                                                                              <div class="ct_grid_40_40_20 mb-3">
                                                                                    <div>
                                                                                          <div class="form-group">
                                                                                                <label for=""
                                                                                                      class="mb-2 ct_text_black">
                                                                                                      Start Time
                                                                                                      <span
                                                                                                            class="ct_red_text">*</span></label>
                                                                                                <input type="time"
                                                                                                      class="form-control ct_input"
                                                                                                      formControlName="start_time" />
                                                                                          </div>
                                                                                          <div *ngIf="session.get('start_time')?.touched && session.get('start_time')?.hasError('required')"
                                                                                                class="ct_text_red">
                                                                                                Start time is required
                                                                                          </div>
                                                                                    </div>
                                                                                    <div>
                                                                                          <div class="form-group">
                                                                                                <label for=""
                                                                                                      class="mb-2 ct_text_black">End
                                                                                                      Time<span
                                                                                                            class="ct_red_text">*</span></label>
                                                                                                <input type="time"
                                                                                                      class="form-control ct_input"
                                                                                                      formControlName="end_time" />
                                                                                          </div>
                                                                                          <div *ngIf="session.get('end_time')?.touched && session.get('end_time')?.hasError('required')"
                                                                                                class="ct_text_red">
                                                                                                End time is required
                                                                                          </div>
                                                                                    </div>
                                                                                    <div>
                                                                                          <div class="form-group">
                                                                                                <label for=""
                                                                                                      class="mb-2 ct_text_black">Session
                                                                                                      Duration
                                                                                                      <span
                                                                                                            class="ct_red_text">*</span></label>
                                                                                                <nz-select
                                                                                                      class="form-control ct_input"
                                                                                                      formControlName="sessionDuration"
                                                                                                      nzPlaceHolder="Select session duration">
                                                                                                      <nz-option
                                                                                                            *ngFor="let duration of sessionDuration"
                                                                                                            [nzValue]="duration"
                                                                                                            [nzLabel]="duration"></nz-option>
                                                                                                </nz-select>
                                                                                          </div>
                                                                                          <div *ngIf="session.get('sessionDuration')?.touched && session.get('sessionDuration')?.hasError('required')"
                                                                                                class="ct_text_red">
                                                                                                Session duration is
                                                                                                required
                                                                                          </div>
                                                                                    </div>

                                                                                    <div>
                                                                                          <label>&nbsp;</label>
                                                                                          <button type="button"
                                                                                                class="ct_delete_icon_l"
                                                                                                (click)="removeSession(i, j)">
                                                                                                <i
                                                                                                      class="fa-solid fa-xmark"></i>
                                                                                          </button>
                                                                                    </div>
                                                                              </div>
                                                                        </div>
                                                                  </div>

                                                                  <button type="button" class="ct_black_btn py-2 px-3"
                                                                        (click)="addSession(i)">+ Add
                                                                        Session</button>
                                                            </div>
                                                      </div>
                                                </div>
                                          </div>
                                    </div>

                                    <button type="submit" name="next"
                                          class="ct_form_next action-button  ct_black_btn float-end mx-1" value="Next"
                                          [disabled]="loading">
                                          @if(loading){
                                          <div class="spinner-border" role="status">
                                                <span class="sr-only">Loading...</span>
                                          </div>
                                          }@else {
                                          {{isEdit ? 'Update' : 'Submit'}}
                                          }
                                    </button>
                                    <button type="button" name="previous"
                                          class="previous action-button-previous ct_outline_btn mx-1 float-end"
                                          value="Previous" (click)="previousStep()">Previous</button>

                              </form>
                        </fieldset>
                  </div>
            </div>
      </div>
</section>