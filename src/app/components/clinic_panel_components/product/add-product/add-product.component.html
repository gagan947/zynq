<div class="ct_px_30 mt-4 pb-4">
      <div class="container-fluid">
            <div class="row">
                  <div class="col-md-12">
                        <div class="d-flex align-items-center gap-3 mb-3">
                              <a (click)="location.back()" class="ct_back_icon"><i
                                          class="fa-solid fa-chevron-left"></i></a>
                              <h4 class="ct_fs_24 ct_black_text mb-0"><span class="ct_fw_600">{{'ProductManagement' | translate}} </span>
                                    <span class="ct_text_op_07 ct_fs_16"> /
                                          {{(productId ? 'Update' : 'AddNew') | translate}} {{'Product' | translate}}</span>
                              </h4>
                        </div>
                        <form [formGroup]="Form" (ngSubmit)="onSubmit()">
                              <div class="ct_white_bg ct_border_radius_10 ct_border_clr_D2D5DB ct_py_28_px_20">
                                    <h4 class="mb-3 ct_fs_20 ct_fw_600">{{'ProductInformation' | translate}}</h4>
                                    <div class="row">
                                          <div class="col-md-6">
                                                <div class="form-group mb-3">
                                                      <label for="" class="mb-2">{{'ProductName' | translate}}</label>
                                                      <input type="text" placeholder="{{'Enter' | translate}} {{'ProductName' | translate}}"
                                                            class="form-control ct_input" formControlName="name">
                                                      <span
                                                            *ngIf="Form.controls['name'].invalid && Form.controls['name'].touched">
                                                            <span *ngIf="Form.controls['name'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  {{'Product' | translate}} {{'Name' | translate | lowercase}} {{'isRequired' | translate}}.
                                                            </span>
                                                      </span>
                                                </div>
                                          </div>
                                          <div class="col-md-3">
                                                <div class="form-group mb-3">
                                                      <label for="" class="mb-2">{{'Price' | translate}}</label>
                                                      <input type="number" placeholder="{{'Enter' | translate}} {{'Price' | translate}}"
                                                            class="form-control ct_input" formControlName="price">
                                                      <span
                                                            *ngIf="Form.controls['price'].invalid && Form.controls['price'].touched">
                                                            <span *ngIf="Form.controls['price'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                 {{'Price' | translate}} {{'isRequired' | translate}}.
                                                            </span>
                                                            <span *ngIf="Form.controls['price'].errors?.['min']"
                                                                  class="ct_text_red mt-2">
                                                                  {{'Invalid' | translate}} {{'Price' | translate}}.
                                                            </span>
                                                      </span>
                                                </div>
                                          </div>
                                          <div class="col-md-3">
                                                <div class="form-group mb-3">
                                                      <label for="" class="mb-2">{{'Stock' | translate}}</label>
                                                      <input type="number" placeholder="{{'Enter' | translate}} {{'Stock' | translate}}"
                                                            class="form-control ct_input" formControlName="stock">
                                                      <span
                                                            *ngIf="Form.controls['stock'].invalid && Form.controls['stock'].touched">
                                                            <span *ngIf="Form.controls['stock'].errors?.['required']"
                                                                  class="ct_text_red mt-2">
                                                                  {{'Stock' | translate}} {{'isRequired' | translate}}.
                                                            </span>
                                                            <span *ngIf="Form.controls['stock'].errors?.['min']"
                                                                  class="ct_text_red mt-2">
                                                                  {{'Invalid' | translate}} {{'Stock' | translate}}.
                                                            </span>
                                                      </span>
                                                </div>
                                          </div>
                                    </div>
                                    <div class="form-group mb-3">
                                          <label for="" class="mb-2">{{'ShortTagline' | translate}}</label>
                                          <input type="text" placeholder="{{'Enter' | translate}} {{'ShortTagline' | translate}}"
                                                class="form-control ct_input" formControlName="short_description">
                                          <span
                                                *ngIf="Form.controls['short_description'].invalid && Form.controls['short_description'].touched">
                                                <span *ngIf="Form.controls['short_description'].errors?.['required']"
                                                      class="ct_text_red mt-2">
                                                      {{'ShortDescription' | translate}} {{'isRequired' | translate}}.
                                                </span>
                                                <span *ngIf="Form.controls['short_description'].errors?.['maxlength']"
                                                      class="ct_text_red mt-2">
                                                      {{'ShortDescription' | translate}} {{'isTooLong' | translate}}.
                                                </span>
                                          </span>
                                    </div>

                                    <div class="form-group mb-3">
                                          <label for="" class="mb-2">{{'Description' | translate}}</label>
                                          <textarea type="text" placeholder="{{'WriteHere' | translate}}..."
                                                class="form-control ct_input h-auto" rows="4"
                                                formControlName="full_description"></textarea>
                                          <span
                                                *ngIf="Form.controls['full_description'].invalid && Form.controls['full_description'].touched">
                                                <span *ngIf="Form.controls['full_description'].errors?.['required']"
                                                      class="ct_text_red mt-2">
                                                     {{'Description' | translate}} {{'isRequired' | translate}}.
                                                </span>
                                                <span *ngIf="Form.controls['full_description'].errors?.['maxlength']"
                                                      class="ct_text_red mt-2">
                                                      {{'Description' | translate}} {{'isTooLong' | translate}}.
                                                </span>
                                          </span>
                                    </div>

                                    <div class="form-group mb-4">
                                          <label for="" class="mb-2 ct_text_black">{{'Upload' | translate}} {{'CoverImage' | translate}}</label>
                                          <div class="">
                                                <div *ngIf="!coverPreview" class="ct_upload_product_main"
                                                      (click)="coverInput.click()">
                                                      <svg width="33" height="33" viewBox="0 0 33 33" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M5.87174 22.0167C4.26376 20.9403 3.20508 19.1073 3.20508 17.027C3.20508 13.9023 5.59376 11.3354 8.64473 11.0528C9.26883 7.25653 12.5654 4.36035 16.5384 4.36035C20.5114 4.36035 23.808 7.25653 24.4321 11.0528C27.4831 11.3354 29.8717 13.9023 29.8717 17.027C29.8717 19.1073 28.8131 20.9403 27.2051 22.0167M11.2051 21.6937L16.5384 16.3604M16.5384 16.3604L21.8717 21.6937M16.5384 16.3604V28.3604"
                                                                  stroke="#9CA3AF" stroke-width="2.66667"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                      </svg>

                                                      <p class="text-center ct_fs_18 ct_text_op_07 mb-0">{{'Upload' | translate}} {{'CoverImage' | translate}} {{'here' | translate}}</p>
                                                      <!-- <small class="text-center d-block ct_text_9CA3AF py-2">PNG,
                                                                  JPG up to
                                                                  5MB</small> -->
                                                      <small
                                                            class="text-center d-block ct_text_9CA3AF py-2">(190*135)</small>
                                                      <label>
                                                            <div class="ct_browse_btn">
                                                                  <span>{{'browseFile' | translate}}</span>
                                                            </div>
                                                      </label>
                                                </div>
                                                <input type="file" #coverInput class="d-none" accept="image/png"
                                                      formControlName="coverImg" (change)="onCoverImage($event)">
                                                <div class="ct_uploaded_img123 position-relative w-100 ct_upload_product_main"
                                                      *ngIf="coverPreview">
                                                      <div class="ct_uploaded_img_1234">
                                                            <img [src]="coverPreview" alt=""
                                                                  style="object-fit: contain;" />
                                                            <i class="fa-solid fa-xmark"
                                                                  (click)="removeCoverImage()"></i>
                                                      </div>
                                                </div>
                                                <span *ngIf="!coverPreview && submitted">
                                                      <span class="ct_text_red mt-2">
                                                            {{'pleaseUploadCoverImage' | translate}}
                                                      </span>
                                                </span>
                                          </div>
                                    </div>

                                    <div class="form-group mb-0">
                                          <label for="" class="mb-2">{{'Upload' | translate}} {{'ProductImage' | translate}}</label>
                                          <div class="ct_upload_product_main ct_upload_product_main_180">
                                                <svg width="33" height="33" viewBox="0 0 33 33" fill="none"
                                                      xmlns="http://www.w3.org/2000/svg">
                                                      <path d="M5.87174 22.0167C4.26376 20.9403 3.20508 19.1073 3.20508 17.027C3.20508 13.9023 5.59376 11.3354 8.64473 11.0528C9.26883 7.25653 12.5654 4.36035 16.5384 4.36035C20.5114 4.36035 23.808 7.25653 24.4321 11.0528C27.4831 11.3354 29.8717 13.9023 29.8717 17.027C29.8717 19.1073 28.8131 20.9403 27.2051 22.0167M11.2051 21.6937L16.5384 16.3604M16.5384 16.3604L21.8717 21.6937M16.5384 16.3604V28.3604"
                                                            stroke="#9CA3AF" stroke-width="2.66667"
                                                            stroke-linecap="round" stroke-linejoin="round" />
                                                </svg>

                                                <p class="text-center ct_fs_18 ct_text_op_07 mb-0">{{'Upload' | translate}} {{'ProductImage' | translate}} {{'here' | translate}}</p>
                                                <label for="ct_upload_product">
                                                      <input type="file" name="" id="ct_upload_product" class="d-none"
                                                            accept="image/*" (change)="onProductImage($event)" multiple>
                                                      <div class="ct_browse_btn">
                                                            <span>{{'browseFile' | translate}}</span>
                                                      </div>
                                                </label>
                                                <!-- after upload image change url to below image -->
                                                <img src="assets/img/hunting_knee.png" alt=""
                                                      class="ct_uploaded_img d-none">
                                          </div>
                                          <div class="ct_multiple_img_div ct_custom_scroll">
                                                @for (item of previewProductImages; track $index) {
                                                <div class="ct_uploaded_img123 position-relative ">
                                                      <div class="ct_uploaded_img_w">
                                                            <img [src]="item" alt="" />
                                                            <i class="fa-solid fa-xmark ct_cursor_pointer"
                                                                  (click)="removeProductImage($index, item)"></i>
                                                      </div>
                                                </div>
                                                }
                                          </div>
                                          <span *ngIf="previewProductImages.length == 0 && submitted">
                                                <span class="ct_text_red mt-2">
                                                      {{'pleaseUploadProductImage' | translate}}
                                                </span>
                                          </span>
                                    </div>
                              </div>

                              <div class="ct_white_bg ct_border_radius_10 ct_border_clr_D2D5DB ct_py_28_px_20 mt-4">
                                    <h4 class="mb-3 ct_fs_20 ct_fw_600">{{'Treatments' | translate}}</h4>
                                    <div class="mb-4">
                                          <nz-select nzMode="multiple" nzPlaceHolder="{{'Select' | translate}} {{'Treatments' | translate}}"
                                                class="form-control ct_input h-auto" formControlName="treatments"
                                                nzNotFoundContent="No Treatments Found">
                                                @for (item of treatments; track item) {
                                                <nz-option [nzLabel]="item.name"
                                                      [nzValue]="item.treatment_id"></nz-option>
                                                }
                                          </nz-select>
                                          <span class="ct_text_red mt-2"
                                                *ngIf="Form.get('treatments')?.invalid && Form.get('treatments')?.touched">
                                                {{'pleaseAddAtleast' | translate}} {{'Treatment' | translate | lowercase}}.
                                          </span>
                                    </div>
                              </div>
                              <div class="ct_white_bg ct_border_radius_10 ct_border_clr_D2D5DB ct_py_28_px_20 mt-4">
                                    <h4 class="mb-3 ct_fs_20 ct_fw_600">{{'HighlightedFeatures' | translate}}</h4>
                                    <div>
                                          <ul
                                                class="d-flex align-items-center gap-3 flex-wrap  ct_para_scroll ct_custom_scroll ct_pe_30">
                                                @for (item of selectedFeatures; track
                                                $index) {
                                                <li>
                                                      <button type="button" class="ct_select_badge">{{item}}
                                                            <span (click)="removeFeature($index)"><i
                                                                        class="fa-solid fa-xmark"></i></span></button>
                                                </li>
                                                }
                                          </ul>
                                          <div class="position-relative mt-4">
                                                <input type="text" class="form-control ct_input ct_pe_122"
                                                      placeholder="{{'TypeToAdd' | translate}} {{'Features' | translate}}..." #featureInput>
                                                <button type="button" class="ct_black_btn ct_btn_position_right"
                                                      (click)="addFeature(featureInput.value)">{{'Add' | translate}}</button>
                                          </div>
                                          <span *ngIf="selectedFeatures.length == 0 && submitted">
                                                <span class="ct_text_red mt-2">
                                                      {{'Features' | translate}} {{'areRequired' | translate}}.
                                                </span>
                                          </span>
                                    </div>
                              </div>

                              <!-- <div class="ct_white_bg ct_border_radius_10 ct_border_clr_D2D5DB ct_py_28_px_20 mt-4">
                                    <h4 class="mb-3 ct_fs_20 ct_fw_600">Available Sizes</h4>
                                    <div>
                                          <ul class="d-flex align-items-center gap-4 flex-wrap ">
                                                @for (item of sizes; track $index) {
                                                <li>
                                                      <div class="form-check d-flex align-items-center gap-2">
                                                            <input class="form-check-input ct_custom_check"
                                                                  type="checkbox" [value]="item.value" [id]="$index"
                                                                  [checked]="selectedSizes.includes(item.value)"
                                                                  (change)="addSizes(item.value)">
                                                            <label class="form-check-label mb-0" [for]="$index">
                                                                  {{item.value}}
                                                            </label>
                                                      </div>
                                                </li>
                                                }
                                          </ul>
                                    </div>
                                    <span *ngIf="selectedSizes.length == 0 && submitted">
                                          <span class="ct_text_red mt-2">
                                                Sizes are required.
                                          </span>
                                    </span>
                              </div> -->
                              <div class="ct_white_bg ct_border_radius_10 ct_border_clr_D2D5DB ct_py_28_px_20 mt-4">
                                    <h4 class="mb-3 ct_fs_20 ct_fw_600">{{'KeyBenefits' | translate}}</h4>
                                    <div>
                                          <ul
                                                class="d-flex align-items-center gap-3 flex-wrap  ct_para_scroll ct_custom_scroll ct_pe_30">
                                                @for (item of selectedBenefits; track
                                                $index) {
                                                <li>
                                                      <button type="button" class="ct_select_badge">{{item}}
                                                            <span (click)="removeBenefit($index)"><i
                                                                        class="fa-solid fa-xmark"></i></span></button>
                                                </li>
                                                }
                                          </ul>
                                          <div class="position-relative mt-4">
                                                <input type="text" class="form-control ct_input ct_pe_122"
                                                      placeholder="{{'TypeToAdd' | translate}} {{'KeyBenefits' | translate}}..." #BenefitInput>
                                                <button type="button" class="ct_black_btn ct_btn_position_right"
                                                      (click)="addBenefit(BenefitInput.value)">{{'Add' | translate}}</button>
                                          </div>
                                          <span *ngIf="selectedBenefits.length == 0 && submitted">
                                                <span class="ct_text_red mt-2">
                                                      {{'KeyBenefits' | translate}} {{'areRequired' | translate}}.
                                                </span>
                                          </span>
                                    </div>
                              </div>
                              <div class="ct_white_bg ct_border_radius_10 ct_border_clr_D2D5DB ct_py_28_px_20 mt-4">
                                    <h4 class="mb-3 ct_fs_20 ct_fw_600">{{'HowToUse' | translate}}</h4>
                                    <div class="form-group">
                                          <textarea class="form-control h-auto ct_input" rows="4"
                                                placeholder="{{'WriteHere' | translate}}" formControlName="how_to_use"></textarea>
                                          <span
                                                *ngIf="Form.controls['how_to_use'].invalid && Form.controls['how_to_use'].touched">
                                                <span *ngIf="Form.controls['how_to_use'].errors?.['required']"
                                                      class="ct_text_red mt-2">
                                                      {{'HowToUse' | translate }} {{'isRequired' | translate}}.
                                                </span>
                                          </span>

                                    </div>
                              </div>
                              <div class="ct_white_bg ct_border_radius_10 ct_border_clr_D2D5DB ct_py_28_px_20 mt-4">
                                    <h4 class="mb-3 ct_fs_20 ct_fw_600">{{'Ingredients' | translate}}</h4>
                                    <div>
                                          <ul
                                                class="d-flex align-items-center gap-3 flex-wrap  ct_para_scroll ct_custom_scroll ct_pe_30">
                                                @for (item of selectedIngredients; track
                                                $index) {
                                                <li>
                                                      <button type="button" class="ct_select_badge">{{item}}
                                                            <span (click)="removeIngredient($index)"><i
                                                                        class="fa-solid fa-xmark"></i></span></button>
                                                </li>
                                                }
                                          </ul>
                                          <div class="position-relative mt-4">
                                                <input type="text" class="form-control ct_input ct_pe_122"
                                                      placeholder="{{'TypeToAdd' | translate}} {{'Ingredients' | translate}}..." #ingredientInput>
                                                <button type="button" class="ct_black_btn ct_btn_position_right"
                                                      (click)="addIngredient(ingredientInput.value)">{{'Add' | translate}}</button>
                                          </div>
                                          <span *ngIf="selectedIngredients.length == 0 && submitted">
                                                <span class="ct_text_red mt-2">
                                                      {{'Ingredients' | translate}} {{'areRequired' | translate}}.
                                                </span>
                                          </span>
                                    </div>
                              </div>
                              <div class="d-flex align-items-center justify-content-end gap-3 mt-4">
                                    <button class="ct_outline_btn" (click)="location.back()"
                                          type="reset">{{'Cancel' | translate}}</button>
                                    <button class="ct_black_btn">{{productId ? ('Update' | translate) : ('AddProduct' | translate)}}</button>
                              </div>
                        </form>
                  </div>
            </div>
      </div>
</div>

<div class="modal fade modal-lg" id="ct_feedback_detail_modal" tabindex="-1"
      aria-labelledby="ct_feedback_detail_modalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                  <div class="modal-body">
                        <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="true"
                              [aspectRatio]="38 / 27" [resizeToWidth]="190" [resizeToHeight]="135" format="png"
                              (imageCropped)="imageCropped($event)">
                        </image-cropper>
                  </div>
                  <div class="modal-footer">
                        <button type="button" class="ct_outline_btn" data-bs-dismiss="modal" #closeBtn>{{'Cancel' | translate}}</button>
                        <button type="button" class="ct_black_btn" (click)="onDone()">{{'Done' | translate}}</button>
                  </div>
            </div>
      </div>
</div>